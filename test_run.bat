@echo off
chcp 65001 >nul
setlocal enabledelayedexpansion

:: CONFIGURATION
set "keyhunt=KeyHunt-Cuda.exe"
set "hashfile=puzzle71_hash160_sorted.bin"
set "log=log.txt"

:: VERY SMALL RANGES (2^52 keys each ~4.5 trillion)
set ranges[0]=0x4000000000000000:0x4010000000000000
set ranges[1]=0x4010000000000000:0x4020000000000000
set ranges[2]=0x4020000000000000:0x4030000000000000
set ranges[3]=0x4030000000000000:0x4040000000000000
set ranges[4]=0x4040000000000000:0x4050000000000000
set ranges[5]=0x4050000000000000:0x4060000000000000
set ranges[6]=0x4060000000000000:0x4070000000000000
set ranges[7]=0x4070000000000000:0x4080000000000000
set ranges[8]=0x4080000000000000:0x4090000000000000
set ranges[9]=0x4090000000000000:0x40A0000000000000
set ranges[10]=0x40A0000000000000:0x40B0000000000000
set ranges[11]=0x40B0000000000000:0x40C0000000000000
set ranges[12]=0x40C0000000000000:0x40D0000000000000
set ranges[13]=0x40D0000000000000:0x40E0000000000000
set ranges[14]=0x40E0000000000000:0x40F0000000000000
set ranges[15]=0x40F0000000000000:0x4100000000000000
set ranges[16]=0x4100000000000000:0x4110000000000000
set ranges[17]=0x4110000000000000:0x4120000000000000
set ranges[18]=0x4120000000000000:0x4130000000000000
set ranges[19]=0x4130000000000000:0x4140000000000000
set ranges[20]=0x4140000000000000:0x4150000000000000
set ranges[21]=0x4150000000000000:0x4160000000000000
set ranges[22]=0x4160000000000000:0x4170000000000000
set ranges[23]=0x4170000000000000:0x4180000000000000
set ranges[24]=0x4180000000000000:0x4190000000000000
set ranges[25]=0x4190000000000000:0x41A0000000000000
set ranges[26]=0x41A0000000000000:0x41B0000000000000
set ranges[27]=0x41B0000000000000:0x41C0000000000000
set ranges[28]=0x41C0000000000000:0x41D0000000000000
set ranges[29]=0x41D0000000000000:0x41E0000000000000
set ranges[30]=0x41E0000000000000:0x41F0000000000000
set ranges[31]=0x41F0000000000000:0x4200000000000000
set ranges[32]=0x4200000000000000:0x4210000000000000
set ranges[33]=0x4210000000000000:0x4220000000000000
set ranges[34]=0x4220000000000000:0x4230000000000000
set ranges[35]=0x4230000000000000:0x4240000000000000
set ranges[36]=0x4240000000000000:0x4250000000000000
set ranges[37]=0x4250000000000000:0x4260000000000000
set ranges[38]=0x4260000000000000:0x4270000000000000
set ranges[39]=0x4270000000000000:0x4280000000000000
set ranges[40]=0x4280000000000000:0x4290000000000000
set ranges[41]=0x4290000000000000:0x42A0000000000000
set ranges[42]=0x42A0000000000000:0x42B0000000000000
set ranges[43]=0x42B0000000000000:0x42C0000000000000
set ranges[44]=0x42C0000000000000:0x42D0000000000000
set ranges[45]=0x42D0000000000000:0x42E0000000000000
set ranges[46]=0x42E0000000000000:0x42F0000000000000
set ranges[47]=0x42F0000000000000:0x4300000000000000
set ranges[48]=0x4300000000000000:0x4310000000000000
set ranges[49]=0x4310000000000000:0x4320000000000000
set ranges[50]=0x4320000000000000:0x4330000000000000
set ranges[51]=0x4330000000000000:0x4340000000000000
set ranges[52]=0x4340000000000000:0x4350000000000000
set ranges[53]=0x4350000000000000:0x4360000000000000
set ranges[54]=0x4360000000000000:0x4370000000000000
set ranges[55]=0x4370000000000000:0x4380000000000000
set ranges[56]=0x4380000000000000:0x4390000000000000
set ranges[57]=0x4390000000000000:0x43A0000000000000
set ranges[58]=0x43A0000000000000:0x43B0000000000000
set ranges[59]=0x43B0000000000000:0x43C0000000000000
set ranges[60]=0x43C0000000000000:0x43D0000000000000
set ranges[61]=0x43D0000000000000:0x43E0000000000000
set ranges[62]=0x43E0000000000000:0x43F0000000000000
set ranges[63]=0x43F0000000000000:0x4400000000000000

:: Total number of ranges
set total=63

:: Start loop
for /L %%i in (0,1,%total%) do (
    call set "range=%%ranges[%%i]%%"
    echo ============================================================
    echo [!date! !time!] 🔍 Scanning chunk: !range!
    echo ============================================================

    %keyhunt% -t 0 -g --gpui 0 --gpux 256,256 -m addresses --coin BTC -o Found.txt --range !range! -i %hashfile%

    if exist Found.txt (
        echo 🎯 --- FOUND! --- >> %log%
        type Found.txt | tee -a %log%
        del Found.txt
    )

    echo Finished range !range! >> %log%
    echo. >> %log%
    timeout /t 2 >nul
)

echo ✅ All 64 batches complete!
pause
